<!-- Gyms Page -->
<section id="gyms-page" class="py-5">
  <div class="container text-center">
    <h2 class="fw-bold mb-4 text-primary">Nearby Gyms</h2>

    <!-- Search Bar for Filtering Gyms -->
    <div class="mb-4">
      <div class="input-group">
        <input
          type="text"
          id="search-gyms"
          class="form-control border-primary rounded-start"
          placeholder="Search Gyms..."
          oninput="filterGyms()"
        />
        <button class="btn btn-primary rounded-end" type="button">
          <i class="bi bi-search"></i>
          <!-- Bootstrap Icons search icon -->
        </button>
      </div>
    </div>

    <!-- All Gym Cards -->
    <div class="row row-cols-2 row-cols-md-4 g-4" id="gyms-list">
      <% gyms.forEach(gym => { %>
      <div class="col gym-card" data-name="<%= gym.name.toLowerCase() %>">
        <div class="border-primary card h-100 shadow-lg">
          <img
            src="<%= gym.image || 'https://via.placeholder.com/350x200' %>"
            class="card-img-top rounded"
            alt="<%= gym.name %>"
            style="max-height: 200px; object-fit: cover"
          />
          <div class="card-body d-flex flex-column">
            <h5 class="card-title text-primary"><%= gym.name %></h5>
            <p class="card-text">
              <%= gym.description || 'No description available.' %>
            </p>
            <p class="card-text">
              <strong>Address:</strong> <%= gym.address || 'Not available' %>
            </p>
            <!-- The Learn More button will always be at the bottom -->
            <a href="/gyms/<%= gym.id %>" class="btn btn-primary mt-auto"
              >Learn More</a
            >
          </div>
        </div>
      </div>
      <% }); %>
    </div>
  </div>
</section>

<!-- JavaScript for Filtering Gyms -->
<script>
  function filterGyms() {
    const searchInput = document
      .getElementById("search-gyms")
      .value.toLowerCase();
    const gymCards = document.querySelectorAll(".gym-card");

    gymCards.forEach((card) => {
      const cardName = card.getAttribute("data-name");
      card.style.display = cardName.includes(searchInput) ? "block" : "none";
    });
  }
</script>
